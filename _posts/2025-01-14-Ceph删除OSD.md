---
title: Ceph删除OSD
date: 2025-01-14+0800
categories: [运维,Ceph]
tags: [ceph]
description: 
---

1. 降低要删除的osd权重为0
```shell
ceph osd crush reweight osd.{osd-num} 0
```

2. 查看集群状态
```shell
ceph -s
```

3. 待集群状态恢复为HEALTH_OK后，停止osd服务
```shell
systemctl stop ceph-osd@{osd-num}.service
```

4. 标记osd为out
```shell
ceph osd out osd.{osd-num}
```

5. 删除crush map中的osd
```shell
ceph osd crush remove osd.{osd-num}
```

5. 删除osd
```shell
ceph osd rm osd.{osd-num}
```

7.（可选步骤）删除osd对应的lvm
```shell
dmsetup remove {device-name}
```

其中device-name通过lsblk命令查看
